<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">

      <title>Survey Questions</title>
      
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  
</head>

<body>
      <form role="form" id="userQuestions">
            <h1>Profile Questions</h1>
            <div class="form-group">
                  <label for="user-name">Name:</label>
                  <input type="text" class="form-checker" id="name">
            </div>
            <br>
            <br>
            <div class="form-group">
                  <label for="name">Photo:</label>
                  <input type="text" class="form-checker" id="photos">

            </div>
            <br>
            <br>
            <p>Please select the most suitable answer:</p>
            <br>

            <div class="row col-lg-12">
                  <p>1. What type of movie do you like?</p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion1">
                              <option></option>
                              <option>1 Action</option>
                              <option>2 Adventure </option>
                              <option>3 Fantasy</option>
                              <option>4 Suspense Thriller </option>
                              <option>5 Animation</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">

                  <p>2. Which movie star you like the best?</p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion2">
                              <option></option>
                              <option>1 Denzel Washington</option>
                              <option>2 Matt Damon</option>
                              <option>3 Popeye</option>
                              <option>4 Antonio Banderas</option>
                              <option>5 None of the Above</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>3. Do you like CIA movies?</p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion3">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>4. Do you like running?</p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion4">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>5. What is your native language?</p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion5">
                              <option></option>
                              <option>1 English</option>
                              <option>2 Spanish</option>
                              <option>3 Portugese</option>
                              <option>4 French</option>
                              <option>5 Italian</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>6. Which actor would you like to star in a movie with?
                  </p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion6">
                              <option></option>
                              <option>1 Denzel Washington</option>
                              <option>2 Matt Damon</option>
                              <option>3 Popeye</option>
                              <option>4 Antonio Banderas </option>
                              <option>5 None of the Above</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>7. Do you like cartoon movies?
                  </p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion7">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>8. Do you like using a sword?
                  </p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion8">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>9. Do you like muscles?
                  </p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion9">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <div class="row col-lg-12">
                  <p>10. Do you like spinach?
                  </p>
                  <div class="form-group col-xs-3">
                        <select data-placeholder="" class="form-control" id="questionion10">
                              <option></option>
                              <option>1 Yes</option>
                              <option>2 No</option>
                              <option>3 Maybe</option>
                              <option>4 Sometimes</option>
                              <option>5 It depends</option>
                        </select>
                  </div>
            </div>
            <br>
            <br>
            <button type="button" class="btn btn-success btn-block" id="submit">Submit</button>

      </form>
      <div class='col s4'>
            <p><a href='/api/friends'>Friends List</a> | <a href="https://github.com/SallyTemple/FriendFinder.git" target='_blank'>GitHub Repo</a></p>
        </div>
      
      </div>

      <div id="modal1" class="modal">
            <div class="modal-content">
              <h5></h5>
              <h5 id="matchStarandAppli"></h5>
              <img id="matchPhotos" src="" alt="No Image" width = 250px>
            </div>
          <div class="modal-footer">
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
          </div>
        </div>
  
      </div>
      <script type="text/javascript">
            $(document).ready(function() {
                $("#submit").on("click", function() {
                    function checkForm() {
                        var formValidation = true;
                        $(".form-checker").each(function() {
                            if ($(this).val() === ''){
                                formValidation= false;
                            }
                        });
            
                        $('.form-control').each(function() {
                            if ($(this).val() === ""){
                                formValidation= false;
                            }
                        });
            
                        return formValidation;
                    }
            
                
                    if (checkForm() == true) {
                        var newAppli = {
                            name: $("#name").val().trim(),
                            photos: $("#photo").val().trim(),
                            scores: [$("#questionion1").val(), $("#questionion2").val(), $("#questionion3").val(), $("#questionion4").val(), $("#questionion5").val(),$("#questionion6").val(), $("#questionion7").val(), $("#questionion8").val(), $("#questionion9").val(), $("#questionion10").val()]
                        };
            
                      
                        var currentURL = window.location.origin;
            
                        $.post(currentURL + "/api/friends", newAppli, function(data) {
                         
                            $("#matchStarandAppli").text(data.name);
                            $("#matchPhotos").attr("src", data.photos);
            
                        });
                       
                            $('.modal').modal();
            
                        //empty applicant answer
                        $("#name").val("");$("#photo").val(""); $("#questionion1").val(""); $("#questionion2").val("");$("#questionion3").val(""); $("#questionion4").val("");
                        $("#questionion5").val("");$("#questionion6").val("");$("#questionion7").val(""); $("#questionion8").val("");$("#questionion9").val(""); $("#questionion10").val("");

                    } else {
                        alert("You need to fill in the fields")
                    }
            
                });
            });
            </script>

                 

                  </script>
</body>

</html>